{% extends 'base.html' %}

{% block title %}Client Details - Health Management System{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>
                <i class="fas fa-user me-2"></i>{{ client.first_name }} {{ client.last_name }}
            </h1>
            <a href="{% url 'clients_list' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left me-2"></i>Back to Clients
            </a>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-info-circle me-2"></i>Client Information
                </h5>
            </div>
            <div class="card-body">
                <p><strong>Name:</strong> {{ client.first_name }} {{ client.last_name }}</p>
                <p><strong>Date of Birth:</strong> {{ client.dob|date:"M d, Y" }} ({{ client.get_age_display }})</p>
                <p><strong>Gender:</strong> {{ client.gender|title }}</p>
                <p><strong>Phone:</strong> {{ client.phone }}</p>
                <p><strong>Email:</strong> {{ client.email|default:"N/A" }}</p>
                <p><strong>Address:</strong> {{ client.address|default:"N/A" }}</p>
                <p><strong>Status:</strong> {% if client.is_active %}
                    <span class="badge bg-success">Active</span>
                    {% else %}
                    <span class="badge bg-secondary">Inactive</span>
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-notes-medical me-2"></i>Additional Information
                </h5>
            </div>
            <div class="card-body">
                <h6>Emergency Contact</h6>
                <p><strong>Name:</strong> {{ client.emergency_contact_name|default:"N/A" }}</p>
                <p><strong>Phone:</strong> {{ client.emergency_contact_phone|default:"N/A" }}</p>

                <h6 class="mt-4">Notes</h6>
                <p>{{ client.notes|linebreaks|default:"No additional notes available." }}</p>
            </div>
        </div>
        <div class="mt-3">
            <a href="{% url 'add_client' %}" class="btn btn-primary">
                <i class="fas fa-user-plus me-2"></i>Add Another Client
            </a>
            <button class="btn btn-info schedule-appointment" data-client-id="{{ client.id }}">
                <i class="fas fa-calendar-plus me-2"></i>Schedule Appointment
            </button>
            <button class="btn btn-success record-visit" data-client-id="{{ client.id }}">
                <i class="fas fa-stethoscope me-2"></i>Record Visit
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Schedule appointment functionality
    $('.schedule-appointment').click(function() {
        const clientId = $(this).data('client-id');
        // TODO: Implement appointment scheduling modal
        alert('Schedule appointment for client ID: ' + clientId);
    });

    // Record visit functionality
    $('.record-visit').click(function() {
        const clientId = $(this).data('client-id');
        // TODO: Implement visit recording modal
        alert('Record visit for client ID: ' + clientId);
    });
});
</script>
{% endblock %}
